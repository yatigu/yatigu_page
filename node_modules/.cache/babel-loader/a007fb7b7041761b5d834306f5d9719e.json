{"ast":null,"code":"import { __rest, __extends, __assign } from 'tslib';\nimport { pipe, angle, degreesToRadians, distance, isPoint3D, isPoint, mix, pointFromVector, progress, radiansToDegrees, smoothFrame, velocityPerFrame, velocityPerSecond, mixColor, mixComplex, clamp, applyOffset, conditional, interpolate, mixArray, smooth, snap, springForce, springForceExpo, springForceLinear, wrap } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport * as styleValueTypes from 'style-value-types';\nimport { color, complex, percent, degrees, vh, vw, px, number } from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport * as easing from '@popmotion/easing';\nimport { linear, createReversedEasing, easeOut, easeInOut } from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\nimport { warning } from 'hey-listen';\n\nvar Chainable =\n/*#__PURE__*/\nfunction () {\n  function Chainable(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.props = props;\n  }\n\n  Chainable.prototype.applyMiddleware = function (middleware) {\n    return this.create(__assign({}, this.props, {\n      middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware]\n    }));\n  };\n\n  Chainable.prototype.pipe = function () {\n    var funcs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n\n  Chainable.prototype.while = function (predicate) {\n    return this.applyMiddleware(function (update, complete) {\n      return function (v) {\n        return predicate(v) ? update(v) : complete();\n      };\n    });\n  };\n\n  Chainable.prototype.filter = function (predicate) {\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return predicate(v) && update(v);\n      };\n    });\n  };\n\n  return Chainable;\n}();\n\nvar Observer =\n/*#__PURE__*/\nfunction () {\n  function Observer(_a, observer) {\n    var middleware = _a.middleware,\n        onComplete = _a.onComplete;\n\n    var _this = this;\n\n    this.isActive = true;\n\n    this.update = function (v) {\n      if (_this.observer.update) _this.updateObserver(v);\n    };\n\n    this.complete = function () {\n      if (_this.observer.complete && _this.isActive) _this.observer.complete();\n      if (_this.onComplete) _this.onComplete();\n      _this.isActive = false;\n    };\n\n    this.error = function (err) {\n      if (_this.observer.error && _this.isActive) _this.observer.error(err);\n      _this.isActive = false;\n    };\n\n    this.observer = observer;\n\n    this.updateObserver = function (v) {\n      return observer.update(v);\n    };\n\n    this.onComplete = onComplete;\n\n    if (observer.update && middleware && middleware.length) {\n      middleware.forEach(function (m) {\n        return _this.updateObserver = m(_this.updateObserver, _this.complete);\n      });\n    }\n  }\n\n  return Observer;\n}();\n\nvar createObserver = function (observerCandidate, _a, onComplete) {\n  var middleware = _a.middleware;\n\n  if (typeof observerCandidate === 'function') {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, {\n      update: observerCandidate\n    });\n  } else {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, observerCandidate);\n  }\n};\n\nvar Action =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Action, _super);\n\n  function Action() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Action.prototype.create = function (props) {\n    return new Action(props);\n  };\n\n  Action.prototype.start = function (observerCandidate) {\n    if (observerCandidate === void 0) {\n      observerCandidate = {};\n    }\n\n    var isComplete = false;\n    var subscription = {\n      stop: function () {\n        return undefined;\n      }\n    };\n\n    var _a = this.props,\n        init = _a.init,\n        observerProps = __rest(_a, [\"init\"]);\n\n    var observer = createObserver(observerCandidate, observerProps, function () {\n      isComplete = true;\n      subscription.stop();\n    });\n    var api = init(observer);\n    subscription = api ? __assign({}, subscription, api) : subscription;\n\n    if (observerCandidate.registerParent) {\n      observerCandidate.registerParent(subscription);\n    }\n\n    if (isComplete) subscription.stop();\n    return subscription;\n  };\n\n  return Action;\n}(Chainable);\n\nvar action = function (init) {\n  return new Action({\n    init: init\n  });\n};\n\nvar BaseMulticast =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(BaseMulticast, _super);\n\n  function BaseMulticast() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.subscribers = [];\n    return _this;\n  }\n\n  BaseMulticast.prototype.complete = function () {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.complete();\n    });\n  };\n\n  BaseMulticast.prototype.error = function (err) {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.error(err);\n    });\n  };\n\n  BaseMulticast.prototype.update = function (v) {\n    for (var i = 0; i < this.subscribers.length; i++) {\n      this.subscribers[i].update(v);\n    }\n  };\n\n  BaseMulticast.prototype.subscribe = function (observerCandidate) {\n    var _this = this;\n\n    var observer = createObserver(observerCandidate, this.props);\n    this.subscribers.push(observer);\n    var subscription = {\n      unsubscribe: function () {\n        var index = _this.subscribers.indexOf(observer);\n\n        if (index !== -1) _this.subscribers.splice(index, 1);\n      }\n    };\n    return subscription;\n  };\n\n  BaseMulticast.prototype.stop = function () {\n    if (this.parent) this.parent.stop();\n  };\n\n  BaseMulticast.prototype.registerParent = function (subscription) {\n    this.stop();\n    this.parent = subscription;\n  };\n\n  return BaseMulticast;\n}(Chainable);\n\nvar Multicast =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(Multicast, _super);\n\n  function Multicast() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Multicast.prototype.create = function (props) {\n    return new Multicast(props);\n  };\n\n  return Multicast;\n}(BaseMulticast);\n\nvar multicast = function () {\n  return new Multicast();\n};\n\nvar stepProgress = function (steps, progress$$1) {\n  var segment = 1 / (steps - 1);\n  var subsegment = 1 / (2 * (steps - 1));\n  var percentProgressOfTarget = Math.min(progress$$1, 1);\n  var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n  var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n  return segmentProgressOfTarget * segment;\n};\n\nvar calc =\n/*#__PURE__*/\nObject.freeze({\n  angle: angle,\n  degreesToRadians: degreesToRadians,\n  distance: distance,\n  isPoint3D: isPoint3D,\n  isPoint: isPoint,\n  dilate: mix,\n  getValueFromProgress: mix,\n  pointFromAngleAndDistance: pointFromVector,\n  getProgressFromValue: progress,\n  radiansToDegrees: radiansToDegrees,\n  smooth: smoothFrame,\n  speedPerFrame: velocityPerFrame,\n  speedPerSecond: velocityPerSecond,\n  stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n  return Array.isArray(v);\n};\n\nvar isSingleValue = function (v) {\n  var typeOfV = typeof v;\n  return typeOfV === 'string' || typeOfV === 'number';\n};\n\nvar ValueReaction =\n/*#__PURE__*/\nfunction (_super) {\n  __extends(ValueReaction, _super);\n\n  function ValueReaction(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n\n    _this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n      }\n    };\n\n    _this.prev = _this.current = props.value || 0;\n\n    if (isSingleValue(_this.current)) {\n      _this.updateCurrent = function (v) {\n        return _this.current = v;\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getSingleVelocity(_this.current, _this.prev);\n      };\n    } else if (isValueList(_this.current)) {\n      _this.updateCurrent = function (v) {\n        return _this.current = v.slice();\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getListVelocity();\n      };\n    } else {\n      _this.updateCurrent = function (v) {\n        _this.current = {};\n\n        for (var key in v) {\n          if (v.hasOwnProperty(key)) {\n            _this.current[key] = v[key];\n          }\n        }\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getMapVelocity();\n      };\n    }\n\n    if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n    return _this;\n  }\n\n  ValueReaction.prototype.create = function (props) {\n    return new ValueReaction(props);\n  };\n\n  ValueReaction.prototype.get = function () {\n    return this.current;\n  };\n\n  ValueReaction.prototype.getVelocity = function () {\n    return this.getVelocityOfCurrent();\n  };\n\n  ValueReaction.prototype.update = function (v) {\n    _super.prototype.update.call(this, v);\n\n    this.prev = this.current;\n    this.updateCurrent(v);\n\n    var _a = getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n\n    this.timeDelta = delta;\n    this.lastUpdated = timestamp;\n    sync.postRender(this.scheduleVelocityCheck);\n  };\n\n  ValueReaction.prototype.subscribe = function (observerCandidate) {\n    var sub = _super.prototype.subscribe.call(this, observerCandidate);\n\n    this.subscribers[this.subscribers.length - 1].update(this.current);\n    return sub;\n  };\n\n  ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n    return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n  };\n\n  ValueReaction.prototype.getListVelocity = function () {\n    var _this = this;\n\n    return this.current.map(function (c, i) {\n      return _this.getSingleVelocity(c, _this.prev[i]);\n    });\n  };\n\n  ValueReaction.prototype.getMapVelocity = function () {\n    var velocity = {};\n\n    for (var key in this.current) {\n      if (this.current.hasOwnProperty(key)) {\n        velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n      }\n    }\n\n    return velocity;\n  };\n\n  return ValueReaction;\n}(BaseMulticast);\n\nvar value = function (value, initialSubscription) {\n  return new ValueReaction({\n    value: value,\n    initialSubscription: initialSubscription\n  });\n};\n\nvar multi = function (_a) {\n  var getCount = _a.getCount,\n      getFirst = _a.getFirst,\n      getOutput = _a.getOutput,\n      mapApi = _a.mapApi,\n      setProp = _a.setProp,\n      startActions = _a.startActions;\n  return function (actions) {\n    return action(function (_a) {\n      var update = _a.update,\n          complete = _a.complete,\n          error = _a.error;\n      var numActions = getCount(actions);\n      var output = getOutput();\n\n      var updateOutput = function () {\n        return update(output);\n      };\n\n      var numCompletedActions = 0;\n      var subs = startActions(actions, function (a, name) {\n        var hasCompleted = false;\n        return a.start({\n          complete: function () {\n            if (!hasCompleted) {\n              hasCompleted = true;\n              numCompletedActions++;\n              if (numCompletedActions === numActions) sync.update(complete);\n            }\n          },\n          error: error,\n          update: function (v) {\n            setProp(output, name, v);\n            sync.update(updateOutput, false, true);\n          }\n        });\n      });\n      return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n        api[methodName] = mapApi(subs, methodName);\n        return api;\n      }, {});\n    });\n  };\n};\n\nvar composite =\n/*#__PURE__*/\nmulti({\n  getOutput: function () {\n    return {};\n  },\n  getCount: function (subs) {\n    return Object.keys(subs).length;\n  },\n  getFirst: function (subs) {\n    return subs[Object.keys(subs)[0]];\n  },\n  mapApi: function (subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return Object.keys(subs).reduce(function (output, propKey) {\n        var _a;\n\n        if (subs[propKey][methodName]) {\n          args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n        }\n\n        return output;\n      }, {});\n    };\n  },\n  setProp: function (output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function (actions, starter) {\n    return Object.keys(actions).reduce(function (subs, key) {\n      subs[key] = starter(actions[key], key);\n      return subs;\n    }, {});\n  }\n});\nvar parallel =\n/*#__PURE__*/\nmulti({\n  getOutput: function () {\n    return [];\n  },\n  getCount: function (subs) {\n    return subs.length;\n  },\n  getFirst: function (subs) {\n    return subs[0];\n  },\n  mapApi: function (subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return subs.map(function (sub, i) {\n        if (sub[methodName]) {\n          return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n        }\n      });\n    };\n  },\n  setProp: function (output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function (actions, starter) {\n    return actions.map(function (action, i) {\n      return starter(action, i);\n    });\n  }\n});\n\nvar parallel$1 = function () {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n  var testNames = Object.keys(typeTests);\n\n  var isVectorProp = function (prop, key) {\n    return prop !== undefined && !typeTests[key](prop);\n  };\n\n  var getVectorKeys = function (props) {\n    return testNames.reduce(function (vectorKeys, key) {\n      if (isVectorProp(props[key], key)) vectorKeys.push(key);\n      return vectorKeys;\n    }, []);\n  };\n\n  var testVectorProps = function (props) {\n    return props && testNames.some(function (key) {\n      return isVectorProp(props[key], key);\n    });\n  };\n\n  return {\n    getVectorKeys: getVectorKeys,\n    testVectorProps: testVectorProps\n  };\n};\n\nvar unitTypes = [px, percent, degrees, vh, vw];\n\nvar findUnitType = function (prop) {\n  return unitTypes.find(function (type) {\n    return type.test(prop);\n  });\n};\n\nvar isUnitProp = function (prop) {\n  return Boolean(findUnitType(prop));\n};\n\nvar createAction = function (action, props) {\n  return action(props);\n};\n\nvar reduceArrayValue = function (i) {\n  return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n  };\n};\n\nvar createArrayAction = function (action, props, vectorKeys) {\n  var firstVectorKey = vectorKeys[0];\n  var actionList = props[firstVectorKey].map(function (v, i) {\n    var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n    return getActionCreator(v)(action, childActionProps);\n  });\n  return parallel$1.apply(void 0, actionList);\n};\n\nvar reduceObjectValue = function (key) {\n  return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n  };\n};\n\nvar createObjectAction = function (action, props, vectorKeys) {\n  var firstVectorKey = vectorKeys[0];\n  var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n    var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n    map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n    return map;\n  }, {});\n  return composite(actionMap);\n};\n\nvar createUnitAction = function (action, _a) {\n  var from = _a.from,\n      to = _a.to,\n      props = __rest(_a, [\"from\", \"to\"]);\n\n  var unitType = findUnitType(from) || findUnitType(to);\n  var transform = unitType.transform,\n      parse = unitType.parse;\n  return action(__assign({}, props, {\n    from: typeof from === 'string' ? parse(from) : from,\n    to: typeof to === 'string' ? parse(to) : to\n  })).pipe(transform);\n};\n\nvar createMixerAction = function (mixer) {\n  return function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n\n    return action(__assign({}, props, {\n      from: 0,\n      to: 1\n    })).pipe(mixer(from, to));\n  };\n};\n\nvar createColorAction =\n/*#__PURE__*/\ncreateMixerAction(mixColor);\nvar createComplexAction =\n/*#__PURE__*/\ncreateMixerAction(mixComplex);\n\nvar createVectorAction = function (action, typeTests) {\n  var _a = createVectorTests(typeTests),\n      testVectorProps = _a.testVectorProps,\n      getVectorKeys = _a.getVectorKeys;\n\n  var vectorAction = function (props) {\n    var isVector = testVectorProps(props);\n    if (!isVector) return action(props);\n    var vectorKeys = getVectorKeys(props);\n    var testKey = vectorKeys[0];\n    var testProp = props[testKey];\n    return getActionCreator(testProp)(action, props, vectorKeys);\n  };\n\n  return vectorAction;\n};\n\nvar getActionCreator = function (prop) {\n  if (typeof prop === 'number') {\n    return createAction;\n  } else if (Array.isArray(prop)) {\n    return createArrayAction;\n  } else if (isUnitProp(prop)) {\n    return createUnitAction;\n  } else if (color.test(prop)) {\n    return createColorAction;\n  } else if (complex.test(prop)) {\n    return createComplexAction;\n  } else if (typeof prop === 'object') {\n    return createObjectAction;\n  } else {\n    return createAction;\n  }\n};\n\nvar decay = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0 : _b,\n        _c = props.from,\n        from = _c === void 0 ? 0 : _c,\n        _d = props.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = props.timeConstant,\n        timeConstant = _e === void 0 ? 350 : _e,\n        _f = props.restDelta,\n        restDelta = _f === void 0 ? 0.5 : _f,\n        modifyTarget = props.modifyTarget;\n    var elapsed = 0;\n    var amplitude = power * velocity;\n    var idealTarget = Math.round(from + amplitude);\n    var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n    var process = sync.update(function (_a) {\n      var frameDelta = _a.delta;\n      elapsed += frameDelta;\n      var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n      var isMoving = delta > restDelta || delta < -restDelta;\n      var current = isMoving ? target + delta : target;\n      update(current);\n\n      if (!isMoving) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorDecay =\n/*#__PURE__*/\ncreateVectorAction(decay, {\n  from: number.test,\n  modifyTarget: function (func) {\n    return typeof func === 'function';\n  },\n  velocity: number.test\n});\n\nvar spring = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0.0 : _b;\n    var _c = props.from,\n        from = _c === void 0 ? 0.0 : _c,\n        _d = props.to,\n        to = _d === void 0 ? 0.0 : _d,\n        _e = props.stiffness,\n        stiffness = _e === void 0 ? 100 : _e,\n        _f = props.damping,\n        damping = _f === void 0 ? 10 : _f,\n        _g = props.mass,\n        mass = _g === void 0 ? 1.0 : _g,\n        _h = props.restSpeed,\n        restSpeed = _h === void 0 ? 0.01 : _h,\n        _j = props.restDelta,\n        restDelta = _j === void 0 ? 0.01 : _j;\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var t = 0;\n    var delta = to - from;\n    var position = from;\n    var prevPosition = position;\n    var process = sync.update(function (_a) {\n      var timeDelta = _a.delta;\n      t += timeDelta;\n      var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n      var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n      prevPosition = position;\n\n      if (dampingRatio < 1) {\n        var envelope = Math.exp(-dampingRatio * angularFreq * t);\n        var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n        position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n      } else {\n        var envelope = Math.exp(-angularFreq * t);\n        position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n      }\n\n      velocity = velocityPerSecond(position - prevPosition, timeDelta);\n      var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n      var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n\n      if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n        position = to;\n        update(position);\n        cancelSync.update(process);\n        complete();\n      } else {\n        update(position);\n      }\n    }, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorSpring =\n/*#__PURE__*/\ncreateVectorAction(spring, {\n  from: number.test,\n  to: number.test,\n  stiffness: number.test,\n  damping: number.test,\n  mass: number.test,\n  velocity: number.test\n});\n\nvar inertia = function (_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.velocity,\n      velocity = _c === void 0 ? 0 : _c,\n      min = _a.min,\n      max = _a.max,\n      _d = _a.power,\n      power = _d === void 0 ? 0.8 : _d,\n      _e = _a.timeConstant,\n      timeConstant = _e === void 0 ? 700 : _e,\n      _f = _a.bounceStiffness,\n      bounceStiffness = _f === void 0 ? 500 : _f,\n      _g = _a.bounceDamping,\n      bounceDamping = _g === void 0 ? 10 : _g,\n      _h = _a.restDelta,\n      restDelta = _h === void 0 ? 1 : _h,\n      modifyTarget = _a.modifyTarget;\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var current = value(from);\n    var activeAnimation;\n    var isSpring = false;\n\n    var isLessThanMin = function (v) {\n      return min !== undefined && v <= min;\n    };\n\n    var isMoreThanMax = function (v) {\n      return max !== undefined && v >= max;\n    };\n\n    var isOutOfBounds = function (v) {\n      return isLessThanMin(v) || isMoreThanMax(v);\n    };\n\n    var isTravellingAwayFromBounds = function (v, currentVelocity) {\n      return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n    };\n\n    var startAnimation = function (animation, next) {\n      activeAnimation && activeAnimation.stop();\n      activeAnimation = animation.start({\n        update: function (v) {\n          return current.update(v);\n        },\n        complete: function () {\n          if (next) {\n            next();\n            return;\n          }\n\n          complete();\n        }\n      });\n    };\n\n    var startSpring = function (props) {\n      isSpring = true;\n      startAnimation(vectorSpring(__assign({}, props, {\n        to: isLessThanMin(props.from) ? min : max,\n        stiffness: bounceStiffness,\n        damping: bounceDamping,\n        restDelta: restDelta\n      })));\n    };\n\n    current.subscribe(function (v) {\n      update(v);\n      var currentVelocity = current.getVelocity();\n\n      if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, currentVelocity)) {\n        startSpring({\n          from: v,\n          velocity: currentVelocity\n        });\n      }\n    });\n\n    if (isOutOfBounds(from)) {\n      startSpring({\n        from: from,\n        velocity: velocity\n      });\n    } else if (velocity !== 0) {\n      var animation = vectorDecay({\n        from: from,\n        velocity: velocity,\n        timeConstant: timeConstant,\n        power: power,\n        restDelta: isOutOfBounds(from) ? 20 : restDelta,\n        modifyTarget: modifyTarget\n      });\n      startAnimation(animation, function () {\n        var v = current.get();\n\n        if (isOutOfBounds(v)) {\n          startSpring({\n            from: v,\n            velocity: current.getVelocity()\n          });\n        } else {\n          complete();\n        }\n      });\n    } else {\n      complete();\n    }\n\n    return {\n      stop: function () {\n        return activeAnimation && activeAnimation.stop();\n      }\n    };\n  });\n};\n\nvar index =\n/*#__PURE__*/\ncreateVectorAction(inertia, {\n  from: number.test,\n  velocity: number.test,\n  min: number.test,\n  max: number.test,\n  damping: number.test,\n  stiffness: number.test,\n  modifyTarget: function (func) {\n    return typeof func === 'function';\n  }\n});\n\nvar frame = function () {\n  return action(function (_a) {\n    var update = _a.update;\n    var initialTime = 0;\n    var process = sync.update(function (_a) {\n      var timestamp = _a.timestamp;\n      if (!initialTime) initialTime = timestamp;\n      update(timestamp - initialTime);\n    }, true, true);\n    return {\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar scrubber = function (_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1 : _c,\n      _d = _a.ease,\n      ease = _d === void 0 ? linear : _d,\n      _e = _a.reverseEase,\n      reverseEase = _e === void 0 ? false : _e;\n\n  if (reverseEase) {\n    ease = createReversedEasing(ease);\n  }\n\n  return action(function (_a) {\n    var update = _a.update;\n    return {\n      seek: function (progress$$1) {\n        return update(progress$$1);\n      }\n    };\n  }).pipe(ease, function (v) {\n    return mix(from, to, v);\n  });\n};\n\nvar vectorScrubber =\n/*#__PURE__*/\ncreateVectorAction(scrubber, {\n  ease: function (func) {\n    return typeof func === 'function';\n  },\n  from: number.test,\n  to: number.test\n});\nvar clampProgress =\n/*#__PURE__*/\nclamp(0, 1);\n\nvar tween = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.duration,\n        duration = _b === void 0 ? 300 : _b,\n        _c = props.ease,\n        ease = _c === void 0 ? easeOut : _c,\n        _d = props.flip,\n        flip = _d === void 0 ? 0 : _d,\n        _e = props.loop,\n        loop = _e === void 0 ? 0 : _e,\n        _f = props.yoyo,\n        yoyo = _f === void 0 ? 0 : _f,\n        _g = props.repeatDelay,\n        repeatDelay = _g === void 0 ? 0 : _g;\n    var _h = props.from,\n        from = _h === void 0 ? 0 : _h,\n        _j = props.to,\n        to = _j === void 0 ? 1 : _j,\n        _k = props.elapsed,\n        elapsed = _k === void 0 ? 0 : _k,\n        _l = props.flipCount,\n        flipCount = _l === void 0 ? 0 : _l,\n        _m = props.yoyoCount,\n        yoyoCount = _m === void 0 ? 0 : _m,\n        _o = props.loopCount,\n        loopCount = _o === void 0 ? 0 : _o;\n    var playhead = vectorScrubber({\n      from: from,\n      to: to,\n      ease: ease\n    }).start(update);\n    var currentProgress = 0;\n    var process;\n    var isActive = false;\n\n    var reverseAnimation = function (reverseEase) {\n      if (reverseEase === void 0) {\n        reverseEase = false;\n      }\n\n      var _a;\n\n      _a = [to, from], from = _a[0], to = _a[1];\n      playhead = vectorScrubber({\n        from: from,\n        to: to,\n        ease: ease,\n        reverseEase: reverseEase\n      }).start(update);\n    };\n\n    var isTweenComplete = function () {\n      var isComplete = isActive && elapsed > duration + repeatDelay;\n      if (!isComplete) return false;\n      if (isComplete && !loop && !flip && !yoyo) return true;\n      elapsed = duration - (elapsed - repeatDelay);\n\n      if (loop && loopCount < loop) {\n        loopCount++;\n        return false;\n      } else if (flip && flipCount < flip) {\n        flipCount++;\n        reverseAnimation();\n        return false;\n      } else if (yoyo && yoyoCount < yoyo) {\n        yoyoCount++;\n        reverseAnimation(yoyoCount % 2 !== 0);\n        return false;\n      }\n\n      return true;\n    };\n\n    var updateTween = function () {\n      currentProgress = clampProgress(progress(0, duration, elapsed));\n      playhead.seek(currentProgress);\n    };\n\n    var startTimer = function () {\n      isActive = true;\n      process = sync.update(function (_a) {\n        var delta = _a.delta;\n        elapsed += delta;\n        updateTween();\n\n        if (isTweenComplete()) {\n          cancelSync.update(process);\n          complete && sync.update(complete, false, true);\n        }\n      }, true);\n    };\n\n    var stopTimer = function () {\n      isActive = false;\n      if (process) cancelSync.update(process);\n    };\n\n    startTimer();\n    return {\n      isActive: function () {\n        return isActive;\n      },\n      getElapsed: function () {\n        return clamp(0, duration, elapsed);\n      },\n      getProgress: function () {\n        return currentProgress;\n      },\n      stop: function () {\n        stopTimer();\n      },\n      pause: function () {\n        stopTimer();\n        return this;\n      },\n      resume: function () {\n        if (!isActive) startTimer();\n        return this;\n      },\n      seek: function (newProgress) {\n        elapsed = mix(0, duration, newProgress);\n        sync.update(updateTween, false, true);\n        return this;\n      },\n      reverse: function () {\n        reverseAnimation();\n        return this;\n      }\n    };\n  });\n};\n\nvar clampProgress$1 =\n/*#__PURE__*/\nclamp(0, 1);\n\nvar defaultEasings = function (values, easing$$1) {\n  return values.map(function () {\n    return easing$$1 || easeOut;\n  }).splice(0, values.length - 1);\n};\n\nvar defaultTimings = function (values) {\n  var numValues = values.length;\n  return values.map(function (value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n};\n\nvar interpolateScrubbers = function (input, scrubbers, update) {\n  var rangeLength = input.length;\n  var finalInputIndex = rangeLength - 1;\n  var finalScrubberIndex = finalInputIndex - 1;\n  var subs = scrubbers.map(function (scrub) {\n    return scrub.start(update);\n  });\n  return function (v) {\n    if (v <= input[0]) {\n      subs[0].seek(0);\n    }\n\n    if (v >= input[finalInputIndex]) {\n      subs[finalScrubberIndex].seek(1);\n    }\n\n    var i = 1;\n\n    for (; i < rangeLength; i++) {\n      if (input[i] > v || i === finalInputIndex) break;\n    }\n\n    var progressInRange = progress(input[i - 1], input[i], v);\n    subs[i - 1].seek(clampProgress$1(progressInRange));\n  };\n};\n\nvar keyframes = function (_a) {\n  var easings = _a.easings,\n      _b = _a.ease,\n      ease = _b === void 0 ? linear : _b,\n      times = _a.times,\n      values = _a.values,\n      tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n\n  easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n  times = times || defaultTimings(values);\n  var scrubbers = easings.map(function (easing$$1, i) {\n    return vectorScrubber({\n      from: values[i],\n      to: values[i + 1],\n      ease: easing$$1\n    });\n  });\n  return tween(__assign({}, tweenProps, {\n    ease: ease\n  })).applyMiddleware(function (update) {\n    return interpolateScrubbers(times, scrubbers, update);\n  });\n};\n\nvar physics = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.acceleration,\n        acceleration = _b === void 0 ? 0 : _b,\n        _c = props.friction,\n        friction = _c === void 0 ? 0 : _c,\n        _d = props.velocity,\n        velocity = _d === void 0 ? 0 : _d,\n        springStrength = props.springStrength,\n        to = props.to;\n    var _e = props.restSpeed,\n        restSpeed = _e === void 0 ? 0.001 : _e,\n        _f = props.from,\n        from = _f === void 0 ? 0 : _f;\n    var current = from;\n    var process = sync.update(function (_a) {\n      var delta = _a.delta;\n      var elapsed = Math.max(delta, 16);\n      if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n      if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n\n      if (springStrength !== undefined && to !== undefined) {\n        var distanceToTarget = to - current;\n        velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n      }\n\n      current += velocityPerFrame(velocity, elapsed);\n      update(current);\n      var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n\n      if (isComplete) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      set: function (v) {\n        current = v;\n        return this;\n      },\n      setAcceleration: function (v) {\n        acceleration = v;\n        return this;\n      },\n      setFriction: function (v) {\n        friction = v;\n        return this;\n      },\n      setSpringStrength: function (v) {\n        springStrength = v;\n        return this;\n      },\n      setSpringTarget: function (v) {\n        to = v;\n        return this;\n      },\n      setVelocity: function (v) {\n        velocity = v;\n        return this;\n      },\n      stop: function () {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorPhysics =\n/*#__PURE__*/\ncreateVectorAction(physics, {\n  acceleration: number.test,\n  friction: number.test,\n  velocity: number.test,\n  from: number.test,\n  to: number.test,\n  springStrength: number.test\n});\nvar DEFAULT_DURATION = 300;\n\nvar flattenTimings = function (instructions) {\n  var flatInstructions = [];\n  var lastArg = instructions[instructions.length - 1];\n  var isStaggered = typeof lastArg === 'number';\n  var staggerDelay = isStaggered ? lastArg : 0;\n  var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n  var numSegments = segments.length;\n  var offset = 0;\n  segments.forEach(function (item, i) {\n    flatInstructions.push(item);\n\n    if (i !== numSegments - 1) {\n      var duration = item.duration || DEFAULT_DURATION;\n      offset += staggerDelay;\n      flatInstructions.push(\"-\" + (duration - offset));\n    }\n  });\n  return flatInstructions;\n};\n\nvar flattenArrayInstructions = function (instructions, instruction) {\n  Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n  return instructions;\n};\n\nvar convertDefToProps = function (props, def, i) {\n  var duration = props.duration,\n      easings = props.easings,\n      times = props.times,\n      values = props.values;\n  var numValues = values.length;\n  var prevTimeTo = times[numValues - 1];\n  var timeFrom = def.at === 0 ? 0 : def.at / duration;\n  var timeTo = (def.at + def.duration) / duration;\n\n  if (i === 0) {\n    values.push(def.from);\n    times.push(timeFrom);\n  } else {\n    if (prevTimeTo !== timeFrom) {\n      if (def.from !== undefined) {\n        values.push(values[numValues - 1]);\n        times.push(timeFrom);\n        easings.push(linear);\n      }\n\n      var from = def.from !== undefined ? def.from : values[numValues - 1];\n      values.push(from);\n      times.push(timeFrom);\n      easings.push(linear);\n    } else if (def.from !== undefined) {\n      values.push(def.from);\n      times.push(timeFrom);\n      easings.push(linear);\n    }\n  }\n\n  values.push(def.to);\n  times.push(timeTo);\n  easings.push(def.ease || easeInOut);\n  return props;\n};\n\nvar timeline = function (instructions, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      duration = _b.duration,\n      elapsed = _b.elapsed,\n      ease = _b.ease,\n      loop = _b.loop,\n      flip = _b.flip,\n      yoyo = _b.yoyo;\n\n  var playhead = 0;\n  var calculatedDuration = 0;\n  var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n  var animationDefs = [];\n  flatInstructions.forEach(function (instruction) {\n    if (typeof instruction === 'string') {\n      playhead += parseFloat(instruction);\n    } else if (typeof instruction === 'number') {\n      playhead = instruction;\n    } else {\n      var def = __assign({}, instruction, {\n        at: playhead\n      });\n\n      def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n      animationDefs.push(def);\n      playhead += def.duration;\n      calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n    }\n  });\n  var tracks = {};\n  var numDefs = animationDefs.length;\n\n  for (var i = 0; i < numDefs; i++) {\n    var def = animationDefs[i];\n    var track = def.track;\n\n    if (track === undefined) {\n      throw new Error('No track defined');\n    }\n\n    if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n    tracks[track].push(def);\n  }\n\n  var trackKeyframes = {};\n\n  for (var key in tracks) {\n    if (tracks.hasOwnProperty(key)) {\n      var keyframeProps = tracks[key].reduce(convertDefToProps, {\n        duration: calculatedDuration,\n        easings: [],\n        times: [],\n        values: []\n      });\n      trackKeyframes[key] = keyframes(__assign({}, keyframeProps, {\n        duration: duration || calculatedDuration,\n        ease: ease,\n        elapsed: elapsed,\n        loop: loop,\n        yoyo: yoyo,\n        flip: flip\n      }));\n    }\n  }\n\n  return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n  return action(function (_a) {\n    var update = _a.update;\n    var eventNames = events.split(' ').map(function (eventName) {\n      element.addEventListener(eventName, update, options);\n      return eventName;\n    });\n    return {\n      stop: function () {\n        return eventNames.forEach(function (eventName) {\n          return element.removeEventListener(eventName, update, options);\n        });\n      }\n    };\n  });\n};\n\nvar defaultPointerPos = function () {\n  return {\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    x: 0,\n    y: 0\n  };\n};\n\nvar eventToPoint = function (e, point) {\n  if (point === void 0) {\n    point = defaultPointerPos();\n  }\n\n  point.clientX = point.x = e.clientX;\n  point.clientY = point.y = e.clientY;\n  point.pageX = e.pageX;\n  point.pageY = e.pageY;\n  return point;\n};\n\nvar points = [\n/*#__PURE__*/\ndefaultPointerPos()];\nvar isTouchDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointsLocation = function (_a) {\n    var touches = _a.touches;\n    isTouchDevice = true;\n    var numTouches = touches.length;\n    points.length = 0;\n\n    for (var i = 0; i < numTouches; i++) {\n      var thisTouch = touches[i];\n      points.push(eventToPoint(thisTouch));\n    }\n  };\n\n  listen(document, 'touchstart touchmove', {\n    passive: true,\n    capture: true\n  }).start(updatePointsLocation);\n}\n\nvar multitouch = function (_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.preventDefault,\n      preventDefault = _c === void 0 ? true : _c,\n      _d = _b.scale,\n      scale = _d === void 0 ? 1.0 : _d,\n      _e = _b.rotate,\n      rotate = _e === void 0 ? 0.0 : _e;\n\n  return action(function (_a) {\n    var update = _a.update;\n    var output = {\n      touches: points,\n      scale: scale,\n      rotate: rotate\n    };\n    var initialDistance = 0.0;\n    var initialRotation = 0.0;\n    var isGesture = points.length > 1;\n\n    if (isGesture) {\n      var firstTouch = points[0],\n          secondTouch = points[1];\n      initialDistance = distance(firstTouch, secondTouch);\n      initialRotation = angle(firstTouch, secondTouch);\n    }\n\n    var updatePoint = function () {\n      if (isGesture) {\n        var firstTouch = points[0],\n            secondTouch = points[1];\n        var newDistance = distance(firstTouch, secondTouch);\n        var newRotation = angle(firstTouch, secondTouch);\n        output.scale = scale * (newDistance / initialDistance);\n        output.rotate = rotate + (newRotation - initialRotation);\n      }\n\n      update(output);\n    };\n\n    var onMove = function (e) {\n      if (preventDefault || e.touches.length > 1) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'touchmove', {\n      passive: !preventDefault\n    }).start(onMove);\n    if (isTouchDevice) sync.update(updatePoint);\n    return {\n      stop: function () {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getIsTouchDevice = function () {\n  return isTouchDevice;\n};\n\nvar point =\n/*#__PURE__*/\ndefaultPointerPos();\nvar isMouseDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointLocation = function (e) {\n    isMouseDevice = true;\n    eventToPoint(e, point);\n  };\n\n  listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\n\nvar mouse = function (_a) {\n  var _b = (_a === void 0 ? {} : _a).preventDefault,\n      preventDefault = _b === void 0 ? true : _b;\n  return action(function (_a) {\n    var update = _a.update;\n\n    var updatePoint = function () {\n      return update(point);\n    };\n\n    var onMove = function (e) {\n      if (preventDefault) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'mousemove').start(onMove);\n    if (isMouseDevice) sync.update(updatePoint);\n    return {\n      stop: function () {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getFirstTouch = function (_a) {\n  var firstTouch = _a[0];\n  return firstTouch;\n};\n\nvar pointer = function (props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n    var touches = _a.touches;\n    return touches;\n  }, getFirstTouch) : mouse(props);\n};\n\nvar index$1 = function (_a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n\n  var x = _a.x,\n      y = _a.y,\n      props = __rest(_a, [\"x\", \"y\"]);\n\n  if (x !== undefined || y !== undefined) {\n    var applyXOffset_1 = applyOffset(x || 0);\n    var applyYOffset_1 = applyOffset(y || 0);\n    var delta_1 = {\n      x: 0,\n      y: 0\n    };\n    return pointer(props).pipe(function (point) {\n      delta_1.x = applyXOffset_1(point.x);\n      delta_1.y = applyYOffset_1(point.y);\n      return delta_1;\n    });\n  } else {\n    return pointer(props);\n  }\n};\n\nvar chain = function () {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var i = 0;\n    var current;\n\n    var playCurrent = function () {\n      current = actions[i].start({\n        complete: function () {\n          i++;\n          i >= actions.length ? complete() : playCurrent();\n        },\n        update: update\n      });\n    };\n\n    playCurrent();\n    return {\n      stop: function () {\n        return current && current.stop();\n      }\n    };\n  });\n};\n\nvar crossfade = function (a, b) {\n  return action(function (observer) {\n    var balance = 0;\n    var fadable = parallel$1(a, b).start(__assign({}, observer, {\n      update: function (_a) {\n        var va = _a[0],\n            vb = _a[1];\n        observer.update(mix(va, vb, balance));\n      }\n    }));\n    return {\n      setBalance: function (v) {\n        return balance = v;\n      },\n      stop: function () {\n        return fadable.stop();\n      }\n    };\n  });\n};\n\nvar delay = function (timeToDelay) {\n  return action(function (_a) {\n    var complete = _a.complete;\n    var timeout = setTimeout(complete, timeToDelay);\n    return {\n      stop: function () {\n        return clearTimeout(timeout);\n      }\n    };\n  });\n};\n\nvar merge = function () {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (observer) {\n    var subs = actions.map(function (thisAction) {\n      return thisAction.start(observer);\n    });\n    return {\n      stop: function () {\n        return subs.forEach(function (sub) {\n          return sub.stop();\n        });\n      }\n    };\n  });\n};\n\nvar schedule = function (scheduler, schedulee) {\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var latest;\n    var schedulerSub = scheduler.start({\n      update: function () {\n        return latest !== undefined && update(latest);\n      },\n      complete: complete\n    });\n    var scheduleeSub = schedulee.start({\n      update: function (v) {\n        return latest = v;\n      },\n      complete: complete\n    });\n    return {\n      stop: function () {\n        schedulerSub.stop();\n        scheduleeSub.stop();\n      }\n    };\n  });\n};\n\nvar stagger = function (actions, interval) {\n  var intervalIsNumber = typeof interval === 'number';\n  var actionsWithDelay = actions.map(function (a, i) {\n    var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n    return chain(delay(timeToDelay), a);\n  });\n  return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n  return function (v) {\n    return \"\" + v + unit;\n  };\n};\n\nvar steps = function (st, min, max) {\n  if (min === void 0) {\n    min = 0;\n  }\n\n  if (max === void 0) {\n    max = 1;\n  }\n\n  return function (v) {\n    var current = progress(min, max, v);\n    return mix(min, max, stepProgress(st, current));\n  };\n};\n\nvar transformMap = function (childTransformers) {\n  return function (v) {\n    var output = __assign({}, v);\n\n    for (var key in childTransformers) {\n      if (childTransformers.hasOwnProperty(key)) {\n        var childTransformer = childTransformers[key];\n        output[key] = childTransformer(v[key]);\n      }\n    }\n\n    return output;\n  };\n};\n\nvar transformers =\n/*#__PURE__*/\nObject.freeze({\n  applyOffset: applyOffset,\n  clamp: clamp,\n  conditional: conditional,\n  interpolate: interpolate,\n  blendArray: mixArray,\n  blendColor: mixColor,\n  pipe: pipe,\n  smooth: smooth,\n  snap: snap,\n  generateStaticSpring: springForce,\n  nonlinearSpring: springForceExpo,\n  linearSpring: springForceLinear,\n  wrap: wrap,\n  appendUnit: appendUnit,\n  steps: steps,\n  transformMap: transformMap\n});\n\nvar css = function (element, props) {\n  warning(false, 'css() is deprecated, use styler instead');\n  return styler(element, props);\n};\n\nvar svg = function (element, props) {\n  warning(false, 'svg() is deprecated, use styler instead');\n  return styler(element, props);\n};\n\nexport { action, multicast, value, vectorDecay as decay, index as inertia, keyframes, frame as everyFrame, vectorPhysics as physics, vectorSpring as spring, timeline, tween, listen, index$1 as pointer, mouse, multitouch, chain, composite, crossfade, delay, merge, parallel$1 as parallel, schedule, stagger, calc, transformers as transform, css, svg, Action, ValueReaction };","map":{"version":3,"sources":["/Users/sinsanghun/yatigu_page/node_modules/popmotion/dist/popmotion.es.js"],"names":["__rest","__extends","__assign","pipe","angle","degreesToRadians","distance","isPoint3D","isPoint","mix","pointFromVector","progress","radiansToDegrees","smoothFrame","velocityPerFrame","velocityPerSecond","mixColor","mixComplex","clamp","applyOffset","conditional","interpolate","mixArray","smooth","snap","springForce","springForceExpo","springForceLinear","wrap","sync","getFrameData","cancelSync","styleValueTypes","color","complex","percent","degrees","vh","vw","px","number","valueTypes","easing","linear","createReversedEasing","easeOut","easeInOut","styler","default","warning","Chainable","props","prototype","applyMiddleware","middleware","create","concat","funcs","_i","arguments","length","pipedUpdate","apply","update","v","while","predicate","complete","filter","Observer","_a","observer","onComplete","_this","isActive","updateObserver","error","err","forEach","m","createObserver","observerCandidate","Action","_super","start","isComplete","subscription","stop","undefined","init","observerProps","api","registerParent","action","BaseMulticast","subscribers","subscriber","i","subscribe","push","unsubscribe","index","indexOf","splice","parent","Multicast","multicast","stepProgress","steps","progress$$1","segment","subsegment","percentProgressOfTarget","Math","min","subsegmentProgressOfTarget","segmentProgressOfTarget","floor","calc","Object","freeze","dilate","getValueFromProgress","pointFromAngleAndDistance","getProgressFromValue","speedPerFrame","speedPerSecond","isValueList","Array","isArray","isSingleValue","typeOfV","ValueReaction","call","scheduleVelocityCheck","postRender","velocityCheck","timestamp","lastUpdated","prev","current","value","updateCurrent","getVelocityOfCurrent","getSingleVelocity","slice","getListVelocity","key","hasOwnProperty","getMapVelocity","initialSubscription","get","getVelocity","delta","timeDelta","sub","parseFloat","map","c","velocity","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","output","updateOutput","numCompletedActions","subs","a","name","hasCompleted","keys","reduce","methodName","composite","args","propKey","starter","parallel","parallel$1","createVectorTests","typeTests","testNames","isVectorProp","prop","getVectorKeys","vectorKeys","testVectorProps","some","unitTypes","findUnitType","find","type","test","isUnitProp","Boolean","createAction","reduceArrayValue","createArrayAction","firstVectorKey","actionList","childActionProps","getActionCreator","reduceObjectValue","createObjectAction","actionMap","createUnitAction","from","to","unitType","transform","parse","createMixerAction","mixer","createColorAction","createComplexAction","createVectorAction","vectorAction","isVector","testKey","testProp","decay","_b","_c","_d","power","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","round","target","process","frameDelta","exp","isMoving","vectorDecay","func","spring","stiffness","damping","_g","mass","_h","restSpeed","_j","initialVelocity","t","position","prevPosition","dampingRatio","sqrt","angularFreq","envelope","expoDecay","sin","cos","isBelowVelocityThreshold","abs","isBelowDisplacementThreshold","vectorSpring","inertia","max","bounceStiffness","bounceDamping","activeAnimation","isSpring","isLessThanMin","isMoreThanMax","isOutOfBounds","isTravellingAwayFromBounds","currentVelocity","startAnimation","animation","next","startSpring","frame","initialTime","scrubber","ease","reverseEase","seek","vectorScrubber","clampProgress","tween","duration","flip","loop","yoyo","repeatDelay","_k","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","currentProgress","reverseAnimation","isTweenComplete","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","resume","newProgress","reverse","clampProgress$1","defaultEasings","values","easing$$1","defaultTimings","numValues","interpolateScrubbers","input","scrubbers","rangeLength","finalInputIndex","finalScrubberIndex","scrub","progressInRange","keyframes","easings","times","tweenProps","physics","acceleration","friction","springStrength","pow","distanceToTarget","set","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","DEFAULT_DURATION","flattenTimings","instructions","flatInstructions","lastArg","isStaggered","staggerDelay","segments","numSegments","offset","item","flattenArrayInstructions","instruction","convertDefToProps","def","prevTimeTo","timeFrom","at","timeTo","timeline","calculatedDuration","animationDefs","tracks","numDefs","track","Error","trackKeyframes","keyframeProps","listen","element","events","options","eventNames","split","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","x","y","eventToPoint","e","point","points","isTouchDevice","document","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","scale","rotate","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","index$1","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","crossfade","b","balance","fadable","va","vb","setBalance","delay","timeToDelay","timeout","setTimeout","clearTimeout","merge","thisAction","schedule","scheduler","schedulee","latest","schedulerSub","scheduleeSub","stagger","interval","intervalIsNumber","actionsWithDelay","appendUnit","unit","st","transformMap","childTransformers","childTransformer","transformers","blendArray","blendColor","generateStaticSpring","nonlinearSpring","linearSpring","css","svg","everyFrame"],"mappings":"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","sourcesContent":["import { __rest, __extends, __assign } from 'tslib';\nimport { pipe, angle, degreesToRadians, distance, isPoint3D, isPoint, mix, pointFromVector, progress, radiansToDegrees, smoothFrame, velocityPerFrame, velocityPerSecond, mixColor, mixComplex, clamp, applyOffset, conditional, interpolate, mixArray, smooth, snap, springForce, springForceExpo, springForceLinear, wrap } from '@popmotion/popcorn';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport * as styleValueTypes from 'style-value-types';\nimport { color, complex, percent, degrees, vh, vw, px, number } from 'style-value-types';\nexport { styleValueTypes as valueTypes };\nimport * as easing from '@popmotion/easing';\nimport { linear, createReversedEasing, easeOut, easeInOut } from '@popmotion/easing';\nexport { easing };\nimport styler from 'stylefire';\nexport { default as styler } from 'stylefire';\nimport { warning } from 'hey-listen';\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(Chainable);\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index = _this.subscribers.indexOf(observer);\n                if (index !== -1) _this.subscribers.splice(index, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\nvar multicast = function () {\n    return new Multicast();\n};\n\nvar stepProgress = function (steps, progress$$1) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress$$1, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    distance: distance,\n    isPoint3D: isPoint3D,\n    isPoint: isPoint,\n    dilate: mix,\n    getValueFromProgress: mix,\n    pointFromAngleAndDistance: pointFromVector,\n    getProgressFromValue: progress,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smoothFrame,\n    speedPerFrame: velocityPerFrame,\n    speedPerSecond: velocityPerSecond,\n    stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (Array.isArray(prop)) {\n        return createArrayAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else if (typeof prop === 'object') {\n        return createObjectAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar inertia = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.velocity,\n        velocity = _c === void 0 ? 0 : _c,\n        min = _a.min,\n        max = _a.max,\n        _d = _a.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = _a.timeConstant,\n        timeConstant = _e === void 0 ? 700 : _e,\n        _f = _a.bounceStiffness,\n        bounceStiffness = _f === void 0 ? 500 : _f,\n        _g = _a.bounceDamping,\n        bounceDamping = _g === void 0 ? 10 : _g,\n        _h = _a.restDelta,\n        restDelta = _h === void 0 ? 1 : _h,\n        modifyTarget = _a.modifyTarget;\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var current = value(from);\n        var activeAnimation;\n        var isSpring = false;\n        var isLessThanMin = function (v) {\n            return min !== undefined && v <= min;\n        };\n        var isMoreThanMax = function (v) {\n            return max !== undefined && v >= max;\n        };\n        var isOutOfBounds = function (v) {\n            return isLessThanMin(v) || isMoreThanMax(v);\n        };\n        var isTravellingAwayFromBounds = function (v, currentVelocity) {\n            return isLessThanMin(v) && currentVelocity < 0 || isMoreThanMax(v) && currentVelocity > 0;\n        };\n        var startAnimation = function (animation, next) {\n            activeAnimation && activeAnimation.stop();\n            activeAnimation = animation.start({\n                update: function (v) {\n                    return current.update(v);\n                },\n                complete: function () {\n                    if (next) {\n                        next();\n                        return;\n                    }\n                    complete();\n                }\n            });\n        };\n        var startSpring = function (props) {\n            isSpring = true;\n            startAnimation(vectorSpring(__assign({}, props, { to: isLessThanMin(props.from) ? min : max, stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta })));\n        };\n        current.subscribe(function (v) {\n            update(v);\n            var currentVelocity = current.getVelocity();\n            if (activeAnimation && !isSpring && isTravellingAwayFromBounds(v, currentVelocity)) {\n                startSpring({ from: v, velocity: currentVelocity });\n            }\n        });\n        if (isOutOfBounds(from)) {\n            startSpring({ from: from, velocity: velocity });\n        } else if (velocity !== 0) {\n            var animation = vectorDecay({\n                from: from,\n                velocity: velocity,\n                timeConstant: timeConstant,\n                power: power,\n                restDelta: isOutOfBounds(from) ? 20 : restDelta,\n                modifyTarget: modifyTarget\n            });\n            startAnimation(animation, function () {\n                var v = current.get();\n                if (isOutOfBounds(v)) {\n                    startSpring({ from: v, velocity: current.getVelocity() });\n                } else {\n                    complete();\n                }\n            });\n        } else {\n            complete();\n        }\n        return {\n            stop: function () {\n                return activeAnimation && activeAnimation.stop();\n            }\n        };\n    });\n};\nvar index = /*#__PURE__*/createVectorAction(inertia, {\n    from: number.test,\n    velocity: number.test,\n    min: number.test,\n    max: number.test,\n    damping: number.test,\n    stiffness: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    }\n});\n\nvar frame = function () {\n    return action(function (_a) {\n        var update = _a.update;\n        var initialTime = 0;\n        var process = sync.update(function (_a) {\n            var timestamp = _a.timestamp;\n            if (!initialTime) initialTime = timestamp;\n            update(timestamp - initialTime);\n        }, true, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress$$1) {\n                return update(progress$$1);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress = /*#__PURE__*/clamp(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            var _a;\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            elapsed = duration - (elapsed - repeatDelay);\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = clampProgress(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1 = /*#__PURE__*/clamp(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar DEFAULT_DURATION = 300;\nvar flattenTimings = function (instructions) {\n    var flatInstructions = [];\n    var lastArg = instructions[instructions.length - 1];\n    var isStaggered = typeof lastArg === 'number';\n    var staggerDelay = isStaggered ? lastArg : 0;\n    var segments = isStaggered ? instructions.slice(0, -1) : instructions;\n    var numSegments = segments.length;\n    var offset = 0;\n    segments.forEach(function (item, i) {\n        flatInstructions.push(item);\n        if (i !== numSegments - 1) {\n            var duration = item.duration || DEFAULT_DURATION;\n            offset += staggerDelay;\n            flatInstructions.push(\"-\" + (duration - offset));\n        }\n    });\n    return flatInstructions;\n};\nvar flattenArrayInstructions = function (instructions, instruction) {\n    Array.isArray(instruction) ? instructions.push.apply(instructions, flattenTimings(instruction)) : instructions.push(instruction);\n    return instructions;\n};\nvar convertDefToProps = function (props, def, i) {\n    var duration = props.duration,\n        easings = props.easings,\n        times = props.times,\n        values = props.values;\n    var numValues = values.length;\n    var prevTimeTo = times[numValues - 1];\n    var timeFrom = def.at === 0 ? 0 : def.at / duration;\n    var timeTo = (def.at + def.duration) / duration;\n    if (i === 0) {\n        values.push(def.from);\n        times.push(timeFrom);\n    } else {\n        if (prevTimeTo !== timeFrom) {\n            if (def.from !== undefined) {\n                values.push(values[numValues - 1]);\n                times.push(timeFrom);\n                easings.push(linear);\n            }\n            var from = def.from !== undefined ? def.from : values[numValues - 1];\n            values.push(from);\n            times.push(timeFrom);\n            easings.push(linear);\n        } else if (def.from !== undefined) {\n            values.push(def.from);\n            times.push(timeFrom);\n            easings.push(linear);\n        }\n    }\n    values.push(def.to);\n    times.push(timeTo);\n    easings.push(def.ease || easeInOut);\n    return props;\n};\nvar timeline = function (instructions, _a) {\n    var _b = _a === void 0 ? {} : _a,\n        duration = _b.duration,\n        elapsed = _b.elapsed,\n        ease = _b.ease,\n        loop = _b.loop,\n        flip = _b.flip,\n        yoyo = _b.yoyo;\n    var playhead = 0;\n    var calculatedDuration = 0;\n    var flatInstructions = instructions.reduce(flattenArrayInstructions, []);\n    var animationDefs = [];\n    flatInstructions.forEach(function (instruction) {\n        if (typeof instruction === 'string') {\n            playhead += parseFloat(instruction);\n        } else if (typeof instruction === 'number') {\n            playhead = instruction;\n        } else {\n            var def = __assign({}, instruction, { at: playhead });\n            def.duration = def.duration === undefined ? DEFAULT_DURATION : def.duration;\n            animationDefs.push(def);\n            playhead += def.duration;\n            calculatedDuration = Math.max(calculatedDuration, def.at + def.duration);\n        }\n    });\n    var tracks = {};\n    var numDefs = animationDefs.length;\n    for (var i = 0; i < numDefs; i++) {\n        var def = animationDefs[i];\n        var track = def.track;\n        if (track === undefined) {\n            throw new Error('No track defined');\n        }\n        if (!tracks.hasOwnProperty(track)) tracks[track] = [];\n        tracks[track].push(def);\n    }\n    var trackKeyframes = {};\n    for (var key in tracks) {\n        if (tracks.hasOwnProperty(key)) {\n            var keyframeProps = tracks[key].reduce(convertDefToProps, {\n                duration: calculatedDuration,\n                easings: [],\n                times: [],\n                values: []\n            });\n            trackKeyframes[key] = keyframes(__assign({}, keyframeProps, { duration: duration || calculatedDuration, ease: ease,\n                elapsed: elapsed,\n                loop: loop,\n                yoyo: yoyo,\n                flip: flip }));\n        }\n    }\n    return composite(trackKeyframes);\n};\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar crossfade = function (a, b) {\n    return action(function (observer) {\n        var balance = 0;\n        var fadable = parallel$1(a, b).start(__assign({}, observer, { update: function (_a) {\n                var va = _a[0],\n                    vb = _a[1];\n                observer.update(mix(va, vb, balance));\n            } }));\n        return {\n            setBalance: function (v) {\n                return balance = v;\n            },\n            stop: function () {\n                return fadable.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar merge = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (observer) {\n        var subs = actions.map(function (thisAction) {\n            return thisAction.start(observer);\n        });\n        return {\n            stop: function () {\n                return subs.forEach(function (sub) {\n                    return sub.stop();\n                });\n            }\n        };\n    });\n};\n\nvar schedule = function (scheduler, schedulee) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var latest;\n        var schedulerSub = scheduler.start({\n            update: function () {\n                return latest !== undefined && update(latest);\n            },\n            complete: complete\n        });\n        var scheduleeSub = schedulee.start({\n            update: function (v) {\n                return latest = v;\n            },\n            complete: complete\n        });\n        return {\n            stop: function () {\n                schedulerSub.stop();\n                scheduleeSub.stop();\n            }\n        };\n    });\n};\n\nvar stagger = function (actions, interval) {\n    var intervalIsNumber = typeof interval === 'number';\n    var actionsWithDelay = actions.map(function (a, i) {\n        var timeToDelay = intervalIsNumber ? interval * i : interval(i);\n        return chain(delay(timeToDelay), a);\n    });\n    return parallel$1.apply(void 0, actionsWithDelay);\n};\n\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar steps = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var current = progress(min, max, v);\n        return mix(min, max, stepProgress(st, current));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    applyOffset: applyOffset,\n    clamp: clamp,\n    conditional: conditional,\n    interpolate: interpolate,\n    blendArray: mixArray,\n    blendColor: mixColor,\n    pipe: pipe,\n    smooth: smooth,\n    snap: snap,\n    generateStaticSpring: springForce,\n    nonlinearSpring: springForceExpo,\n    linearSpring: springForceLinear,\n    wrap: wrap,\n    appendUnit: appendUnit,\n    steps: steps,\n    transformMap: transformMap\n});\n\nvar css = function (element, props) {\n    warning(false, 'css() is deprecated, use styler instead');\n    return styler(element, props);\n};\nvar svg = function (element, props) {\n    warning(false, 'svg() is deprecated, use styler instead');\n    return styler(element, props);\n};\n\nexport { action, multicast, value, vectorDecay as decay, index as inertia, keyframes, frame as everyFrame, vectorPhysics as physics, vectorSpring as spring, timeline, tween, listen, index$1 as pointer, mouse, multitouch, chain, composite, crossfade, delay, merge, parallel$1 as parallel, schedule, stagger, calc, transformers as transform, css, svg, Action, ValueReaction };\n"]},"metadata":{},"sourceType":"module"}